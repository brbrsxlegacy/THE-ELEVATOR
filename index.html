<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>THE ELEVATOR – Backrooms</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{
  margin:0; padding:0; overflow:hidden;
  background:#0b0b0b;
  font-family:Arial,Helvetica,sans-serif;
}
canvas{display:block}

/* HUD */
#hud{
  position:fixed; left:12px; top:10px;
  color:#cfcfcf; font-size:13px;
  background:rgba(0,0,0,.45);
  padding:6px 8px; border:1px solid #333;
}
#prompt{
  position:fixed; bottom:28px; left:50%;
  transform:translateX(-50%);
  color:#e6e6e6;
  background:rgba(0,0,0,.7);
  border:1px solid #444;
  padding:6px 10px;
  display:none;
}
</style>
</head>
<body>

<canvas id="game"></canvas>
<div id="hud">KAT: 1 / 100<br>ENVANTER: -</div>
<div id="prompt">[E] ASANSÖR</div>

<script>
/* ===== CANVAS ===== */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
addEventListener("resize",resize);
resize();

/* ===== INPUT ===== */
const keys = {};
addEventListener("keydown",e=>keys[e.key.toLowerCase()]=true);
addEventListener("keyup",e=>keys[e.key.toLowerCase()]=false);

/* ===== TILE MAP ===== */
/* 1 = DUVAR | 0 = BOŞ */
const TILE = 48;
const MAP = [
"1111111111111111111111111111",
"1000000000000000000000000001",
"1000000000000000111110000001",
"1000000000000000100010000001",
"1000011111100000100010000001",
"1000010000100000000010000001",
"1000010000100000000010000001",
"1000010000111111111110000001",
"1000010000000000000000000001",
"1000010000000000000000000001",
"1000011111111111111111100001",
"1000000000000000000000000001",
"1111111111111111111111111111"
];

/* ===== PLAYER ===== */
const player={
  x:100,y:100,w:26,h:38,
  vx:0,vy:0,
  speed:220,
  jump:-520,
  onGround:false
};

/* ===== CAMERA ===== */
const cam={x:0,y:0};

/* ===== ELEVATOR (DUVAR DIŞI SABİT) ===== */
const elevator={
  x:MAP[0].length*TILE-140,
  y:MAP.length*TILE-96,
  w:48,h:72
};

/* ===== COLLISION ===== */
function solidAt(x,y){
  const tx=Math.floor(x/TILE);
  const ty=Math.floor(y/TILE);
  if(ty<0||ty>=MAP.length||tx<0||tx>=MAP[0].length) return true;
  return MAP[ty][tx]==="1";
}

function movePlayer(dt){
  player.vx=0;
  if(keys["a"]) player.vx=-player.speed;
  if(keys["d"]) player.vx= player.speed;

  if((keys[" "]||keys["space"]) && player.onGround){
    player.vy=player.jump;
    player.onGround=false;
  }

  player.vy+=1200*dt;

  // X
  player.x+=player.vx*dt;
  if(
    solidAt(player.x,player.y)||
    solidAt(player.x+player.w,player.y)||
    solidAt(player.x,player.y+player.h)||
    solidAt(player.x+player.w,player.y+player.h)
  ){
    player.x-=player.vx*dt;
  }

  // Y
  player.y+=player.vy*dt;
  if(
    solidAt(player.x,player.y+player.h)||
    solidAt(player.x+player.w,player.y+player.h)
  ){
    player.y=Math.floor((player.y+player.h)/TILE)*TILE-player.h;
    player.vy=0;
    player.onGround=true;
  }
}

/* ===== GAME LOOP ===== */
let last=performance.now();
function loop(t){
  const dt=Math.min((t-last)/1000,0.033);
  last=t;
  update(dt);
  draw();
  requestAnimationFrame(loop);
}

function update(dt){
  movePlayer(dt);
  cam.x += ((player.x - innerWidth/2) - cam.x)*0.08;
  cam.y += ((player.y - innerHeight/2) - cam.y)*0.08;

  // Elevator prompt
  const dx=player.x-elevator.x;
  const dy=player.y-elevator.y;
  if(Math.hypot(dx,dy)<60){
    document.getElementById("prompt").style.display="block";
  }else{
    document.getElementById("prompt").style.display="none";
  }
}

function draw(){
  ctx.fillStyle="#0b0b0b";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.save();
  ctx.translate(-cam.x,-cam.y);

  // MAP
  for(let y=0;y<MAP.length;y++){
    for(let x=0;x<MAP[y].length;x++){
      if(MAP[y][x]==="1"){
        ctx.fillStyle="#121212";
        ctx.fillRect(x*TILE,y*TILE,TILE,TILE);
        ctx.strokeStyle="#1f1f1f";
        ctx.strokeRect(x*TILE,y*TILE,TILE,TILE);
      }
    }
  }

  // ELEVATOR
  ctx.fillStyle="#3a3a3a";
  ctx.fillRect(elevator.x,elevator.y,elevator.w,elevator.h);
  ctx.fillStyle="#777";
  ctx.fillRect(elevator.x+6,elevator.y+6,14,60);
  ctx.fillRect(elevator.x+28,elevator.y+6,14,60);

  // PLAYER
  ctx.fillStyle="#0a0a0a";
  ctx.fillRect(player.x,player.y,player.w,player.h);
  ctx.fillStyle="#fff";
  ctx.fillRect(player.x+6,player.y+10,4,4);
  ctx.fillRect(player.x+16,player.y+10,4,4);

  ctx.restore();

  // VIGNETTE
  const g=ctx.createRadialGradient(
    canvas.width/2,canvas.height/2,120,
    canvas.width/2,canvas.height/2,
    Math.max(canvas.width,canvas.height)*0.7
  );
  g.addColorStop(0,"rgba(0,0,0,0)");
  g.addColorStop(1,"rgba(0,0,0,.85)");
  ctx.fillStyle=g;
  ctx.fillRect(0,0,canvas.width,canvas.height);
}

loop();
</script>
</body>
</html>

